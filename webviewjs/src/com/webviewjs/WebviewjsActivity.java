package com.webviewjs;



import java.security.PublicKey;

import android.R.string;
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.os.Handler;
import android.text.AlteredCharSequence;
import android.util.Log;
import android.webkit.JsResult;
import android.webkit.WebChromeClient;
import android.webkit.WebSettings;
import android.webkit.WebView;

public class WebviewjsActivity extends Activity {
    private static final String LOG_TAG = "WebViewDemo";
    private WebView mWebView;
    private WebView mWebViewshow;
//    String  jsonText = "{\"name\":\"szh/pd/h/szh###104,384;104,208;104,192;80,152;80,184;88,208;88,384;72,424;96,464;104,416#240,352;248,208;272,184;240,160;216,184;104,208;104,224;224,200;216,352#96,368;112,384;184,376;256,368;240,352;184,360#424,8;416,64;392,152;360,232;304,336;256,408;192,480;168,504;192,496;272,408;328,320;376,232;432,120;448,72;464,56#440,104;432,120;504,224;624,432;736,424;664,400;624,376;568,304#320,368;344,392;440,376;544,360;512,336;480,344;440,352#344,680;344,520;344,496;312,440;312,472;320,520;320,680;312,712;344,752#528,640;544,496;576,464;544,432;512,464;344,496;344,512;528,480;512,640#336,664;352,680;456,672;560,656;536,632;456,656 ###80 152 80 152 90 169 80 169 81 185 100 185 104 201 86 202 88 218 104 218 104 234 88 235 88 251 104 251 104 267 88 267 88 284 104 284 104 300 88 300 88 317 104 316 104 333 88 333 88 350 104 349 104 366 88 366 88 382 104 382 104 399 83 399 76 415 104 415 102 432 77 432 87 448 99 448 96 464 96 464#104 224 104 208 117 206 121 221 138 218 134 202 151 199 155 214 172 211 168 195 185 191 189 208 206 204 202 188 218 183 223 201 240 198 232 169 250 167 258 196 261 195 272 184;223 196 264 192 250 207 224 204 223 221 248 224 247 240 222 237 222 254 246 257 245 273 221 270 220 287 244 290 243 306 219 303 218 320 242 323 241 339 217 336 216 352 240 352#112 384 96 368 114 367 116 384 133 382 132 365 149 364 151 380 169 378 167 362 184 361 186 376 204 374 202 358 219 356 221 372 239 370 237 353 240 352 256 368#424 8 424 8 455 46 422 26 419 44 456 65 446 78 417 61 413 78 441 94 436 110 408 94 404 110 430 126 422 140 399 127 395 143 415 155 408 170 390 159 384 175 400 184 393 199 377 190 371 205 386 214 378 228 365 221 359 236 371 243 363 257 351 250 343 265 355 272 347 286 335 279 327 294 339 301 331 315 320 308 312 323 323 329 314 343 304 337 295 351 305 357 297 371 286 364 277 378 288 384 279 398 268 392 259 405 270 412 258 424 248 418 237 431 247 436 236 449 226 443 215 456 224 461 213 474 203 468 192 481 202 486 189 498 180 493 168 504 168 504#432 120 440 104 449 118 438 129 448 142 458 132 467 146 457 156 466 169 476 160 485 174 475 183 485 196 494 188 503 202 494 210 503 223 511 215 520 229 512 237 520 252 529 243 538 257 528 266 537 281 547 271 556 285 545 295 553 309 565 299 574 312 562 324 570 338 584 325 594 337 578 353 587 367 604 350 614 363 595 381 603 396 624 376 638 385 612 410 620 425 652 393 667 401 636 432 661 430 685 407 702 413 686 428 711 426 719 419 736 424 736 424#320 368 320 368 337 366 341 389 359 390 354 364 371 362 375 387 392 385 388 359 405 357 409 382 426 379 422 355 439 353 443 376 460 374 456 349 473 346 477 371 494 368 489 342 506 338 511 366 527 363 525 346 544 360 544 360#312 440 312 440 322 457 312 457 313 474 331 473 340 489 315 490 318 506 344 505 344 521 320 523 320 539 344 538 344 554 320 556 320 572 344 571 344 587 320 589 320 605 344 604 344 620 320 622 320 638 344 637 344 653 320 655 320 671 344 670 344 686 319 688 314 705 344 703 344 719 319 721 332 737 344 736 344 752 344 752#344 512 344 496 358 494 361 510 378 507 375 491 391 488 394 504 411 501 408 484 425 481 428 498 444 495 441 478 458 475 461 492 478 489 475 472 491 469 494 486 511 484 508 465 523 454 528 481 545 479 537 439 555 443 561 477 564 476 576 464;527 476 567 473 552 488 528 484 526 501 544 504 542 522 525 519 523 536 540 539 538 557 521 553 519 571 536 574 534 591 518 588 516 606 532 609 530 626 514 623 512 640 528 640#352 680 336 664 354 663 356 680 373 679 371 662 388 661 390 678 407 676 405 660 422 659 424 675 442 674 439 658 457 656 459 672 476 670 473 651 490 646 493 667 510 664 506 642 523 637 526 662 543 659 540 636 560 656 560 656\",\"password\":\"vsp\"}";
    String Text= "szh/pd/h/szh###104,384;104,208;104,192;80,152;80,184;88,208;88,384;72,424;96,464;104,416#240,352;248,208;272,184;240,160;216,184;104,208;104,224;224,200;216,352#96,368;112,384;184,376;256,368;240,352;184,360#424,8;416,64;392,152;360,232;304,336;256,408;192,480;168,504;192,496;272,408;328,320;376,232;432,120;448,72;464,56#440,104;432,120;504,224;624,432;736,424;664,400;624,376;568,304#320,368;344,392;440,376;544,360;512,336;480,344;440,352#344,680;344,520;344,496;312,440;312,472;320,520;320,680;312,712;344,752#528,640;544,496;576,464;544,432;512,464;344,496;344,512;528,480;512,640#336,664;352,680;456,672;560,656;536,632;456,656 ###80 152 80 152 90 169 80 169 81 185 100 185 104 201 86 202 88 218 104 218 104 234 88 235 88 251 104 251 104 267 88 267 88 284 104 284 104 300 88 300 88 317 104 316 104 333 88 333 88 350 104 349 104 366 88 366 88 382 104 382 104 399 83 399 76 415 104 415 102 432 77 432 87 448 99 448 96 464 96 464#104 224 104 208 117 206 121 221 138 218 134 202 151 199 155 214 172 211 168 195 185 191 189 208 206 204 202 188 218 183 223 201 240 198 232 169 250 167 258 196 261 195 272 184;223 196 264 192 250 207 224 204 223 221 248 224 247 240 222 237 222 254 246 257 245 273 221 270 220 287 244 290 243 306 219 303 218 320 242 323 241 339 217 336 216 352 240 352#112 384 96 368 114 367 116 384 133 382 132 365 149 364 151 380 169 378 167 362 184 361 186 376 204 374 202 358 219 356 221 372 239 370 237 353 240 352 256 368#424 8 424 8 455 46 422 26 419 44 456 65 446 78 417 61 413 78 441 94 436 110 408 94 404 110 430 126 422 140 399 127 395 143 415 155 408 170 390 159 384 175 400 184 393 199 377 190 371 205 386 214 378 228 365 221 359 236 371 243 363 257 351 250 343 265 355 272 347 286 335 279 327 294 339 301 331 315 320 308 312 323 323 329 314 343 304 337 295 351 305 357 297 371 286 364 277 378 288 384 279 398 268 392 259 405 270 412 258 424 248 418 237 431 247 436 236 449 226 443 215 456 224 461 213 474 203 468 192 481 202 486 189 498 180 493 168 504 168 504#432 120 440 104 449 118 438 129 448 142 458 132 467 146 457 156 466 169 476 160 485 174 475 183 485 196 494 188 503 202 494 210 503 223 511 215 520 229 512 237 520 252 529 243 538 257 528 266 537 281 547 271 556 285 545 295 553 309 565 299 574 312 562 324 570 338 584 325 594 337 578 353 587 367 604 350 614 363 595 381 603 396 624 376 638 385 612 410 620 425 652 393 667 401 636 432 661 430 685 407 702 413 686 428 711 426 719 419 736 424 736 424#320 368 320 368 337 366 341 389 359 390 354 364 371 362 375 387 392 385 388 359 405 357 409 382 426 379 422 355 439 353 443 376 460 374 456 349 473 346 477 371 494 368 489 342 506 338 511 366 527 363 525 346 544 360 544 360#312 440 312 440 322 457 312 457 313 474 331 473 340 489 315 490 318 506 344 505 344 521 320 523 320 539 344 538 344 554 320 556 320 572 344 571 344 587 320 589 320 605 344 604 344 620 320 622 320 638 344 637 344 653 320 655 320 671 344 670 344 686 319 688 314 705 344 703 344 719 319 721 332 737 344 736 344 752 344 752#344 512 344 496 358 494 361 510 378 507 375 491 391 488 394 504 411 501 408 484 425 481 428 498 444 495 441 478 458 475 461 492 478 489 475 472 491 469 494 486 511 484 508 465 523 454 528 481 545 479 537 439 555 443 561 477 564 476 576 464;527 476 567 473 552 488 528 484 526 501 544 504 542 522 525 519 523 536 540 539 538 557 521 553 519 571 536 574 534 591 518 588 516 606 532 609 530 626 514 623 512 640 528 640#352 680 336 664 354 663 356 680 373 679 371 662 388 661 390 678 407 676 405 660 422 659 424 675 442 674 439 658 457 656 459 672 476 670 473 651 490 646 493 667 510 664 506 642 523 637 526 662 543 659 540 636 560 656 560 656*****";
    private Handler mHandler = new Handler();

    @Override
    public void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        setContentView(R.layout.main);
        mWebView = (WebView) findViewById(R.id.webViewkj);
        mWebViewshow = (WebView) findViewById(R.id.webviewshow);
        WebSettings webSettings = mWebView.getSettings();
        webSettings.setSavePassword(false);
        webSettings.setSaveFormData(false);
        webSettings.setJavaScriptEnabled(true);
        webSettings.setSupportZoom(true);
        
        WebSettings webSettingshow = mWebViewshow.getSettings();
        webSettingshow.setSavePassword(false);
        webSettingshow.setSaveFormData(false);
        webSettingshow.setJavaScriptEnabled(true);
        webSettingshow.setSupportZoom(true);
        mWebViewshow.setWebChromeClient(new MyWebChromeClient());  
        mWebView.setWebChromeClient(new MyWebChromeClient());  
        mWebView.addJavascriptInterface(new DemoJavaScriptInterface(), "demo");
        mWebViewshow.addJavascriptInterface(new DemoJavaScriptInterface(), "demo");
        mWebView.loadUrl("file:///android_asset/home_mh_files/demo.html");
    }

    final class DemoJavaScriptInterface {

        DemoJavaScriptInterface() {
        }
        /**
         * This is not called on the UI thread. Post a runnable to invoke
         * loadUrl on the UI thread.
         */
        	public void  clickOnAndroid() {
        	
            mHandler.post(new Runnable() {
                public void run() {
                	System.out.println("clickOnAndroid()");
                	mWebView.loadUrl("javascript:wave("+Text+")"); 
                	mWebViewshow.loadUrl("file:///android_asset/show.html");
                	System.out.println("loade show.html");
//                	mWebViewshow.loadUrl("file:///sdcard/webview/show.html");
                }
            });
//            System.out.println("hello kitty");
//           return "hello11111111111111"; 	
        	}
        	 public String getString()
             {
             	return Text;
             } 
    }

    /** 
     * Provides a hook for calling "alert" from javascript. Useful for 
     * debugging your javascript. 
     */  
    final class MyWebChromeClient extends WebChromeClient {  
        @Override  
        public boolean onJsAlert(WebView view, String url, String message, JsResult result) {  
            Log.d(LOG_TAG, message);  
            result.confirm();  
            return true;  
        }  
          
    }  
    @Override
	public void onBackPressed() {
		// TODO Auto-generated method stub
        WebviewjsActivity.this.finish();
		super.onBackPressed();
	}
    
    
}